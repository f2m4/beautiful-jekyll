---
layout: post
title: virtualbox移动一下
subtitle: 如何移动vb的虚拟机
bigimg: /img/path.jpg
tags: [arch,virtualbox]
---

## virtualbox虚拟机如何移动?
其实vb的文件结构很简单,就一个vdi文件.复制过去即可.  
然后新建一个虚拟机,在选择镜像文件存放位置的时候,选已经存在的镜像文件,既vdi.  
需要注意虚拟机的硬件配置要和移植的匹配.一般默认.但cpu,显示选项注意一点.免得启动报错.  

## 如果有快照咋办?
先说一下快照的处理逻辑.  
快照是向上依赖的.也就是说,建立快照以后,它会在原有的镜像文件基础上,另外建立一个vdi文件.   
这两个文件是依存的.少了基础的那个,只使用新的vdi是无法启动系统的.  
但vb的文件存放逻辑有些问题,它不会在你自定义的目录下存放快照文件.而是在家目录存放.  
所以问题就来了,如何移动一个带快照的系统镜像.  
1. 找到基础镜像(第一个vdi,你指定的存放位置),移动过去.  
2. 找到home目录下面的'VirtualBox VMs'/ab/ 对应的文件.通通移动过去.  
3. 这时候单独导入第一个vdi启动的是快照之前的系统.当然不是我们需要的.  
4. 导入'VirtualBox VMs'/ab/ 下面的文件.启动,提示没有找到基础镜像.  
5. 仔细分析,发现是路径不对.我用了一个最偷懒的办法.  
6. 建立和它需要位置一样的软链接.软链接到我的基础镜像位置.ok  
   
## 后记
不晓得为何vb如此设计.把虚拟机的配置文件与镜像分开存放,而快照也放在配置文件夹里.  
是不是导入导出功能会有所不同.反正我用的是非正常方法.问题解决了.但不完美.有时间在研究一下吧.  
